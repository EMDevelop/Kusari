version: 1
backend:
  phases:
    postBuild:
      commands:
frontend:
  phases:
    preBuild:
      commands:
        - wget https://www.python.org/ftp/python/3.9.6/Python-3.9.6.tgz
        - tar -xvf Python-3.9.6.tgz
        - cd Python-3.9.6
        - ./configure --enable-optimizations
        - make altinstall
        - rm -f ../Python-3.9.6.tgz
        - cd ..
        - python3.9 -V
        - pip3 install -U pipenv
        - pipenv --python python3.9
        - cd frontend
        - npm install
        - cd ..
        - pip3 install psycopg2
        - pip3 install djangorestframework
        - pip3 install django
        - pip3 install django-cors-headers
        - pip3 install requests
        - pip3 install django-dotenv
        - pip3 install pytest
        - pip3 install psycopg2
        - pipenv install
        - cd backend
    build:
      commands:
        - npm run bob
  artifacts:
    baseDirectory: frontend/build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
